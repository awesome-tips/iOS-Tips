# 2018.03

Pod å…³äº unknown UUID è­¦å‘Šçš„è§£å†³æ–¹å¼
----
**ä½œè€…**: [Vong_HUST](https://weibo.com/VongLo)

æœ€è¿‘æŸæ¬¡åœ¨ `pod install` ä¹‹åä¼šå‘ç°ç»ˆç«¯ä¼šè¾“å‡ºç±»ä¼¼ä¸‹é¢çš„æç¤ºï¼š

```
[!] `<PBXBuildFile UUID=`xxxxxxx`>` attempted to initialize an object with an unknown UUID. `xxxxxxxx` for attribute: `file_ref`. This can be the result of a merge and  the unknown UUID is being discarded. 
```
 
ä¸€ç›´å¾ˆå›°æƒ‘ã€‚åé¢ Google åœ¨ `CocoaPods repo` ä¸‹çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼çš„ `issue`ï¼ŒåŸå› æ˜¯ç”±äºä¿®æ”¹äº† `pbxproj` æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰æŠŠå®ƒæäº¤åˆ° `git` å½“ä¸­ï¼Œå½“å…¶ä»–äººæ›´æ–° `pod` çš„æ—¶å€™å°±ä¼šæç¤ºè¿™ä¸ªã€‚

è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨ä¸‹é¢è¿™æ®µå‘½ä»¤ 

```
cat ProjectName.xcodeproj/project.pbxproj | grep SECOND_UDID_F34A6B992B28CA
```

ç„¶åä¼šè¾“å‡ºå¯¹åº”çš„æ–‡ä»¶åï¼Œåšå¯¹åº”çš„åˆ é™¤æˆ–æ·»åŠ æ“ä½œå³å¯ã€‚å†æ‰§è¡Œ `pod install` æˆ– `update` ä¹‹åå³å¯æ­£å¸¸ã€‚

ç»¼åˆèµ·æ¥æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/1-1.jpg?raw=true)

å‚è€ƒï¼š[Pod install result in initialize an object with an unknown UUID](https://github.com/CocoaPods/CocoaPods/issues/1822)

è§£å†³ WKWebView æ— æ³•å¤„ç† URL Scheme å’Œ App Store é“¾æ¥çš„é—®é¢˜
--------
**ä½œè€…**: [KANGZUBIN](https://weibo.com/kangzubin)

ä¹‹å‰ä½¿ç”¨ `UIWebView` æ—¶ï¼Œå½“é‡åˆ° `App Store` ä¸‹è½½é“¾æ¥ï¼ˆä¾‹å¦‚ï¼š `https://itunes.apple.com/cn/app/id414478124?mt=8`ï¼‰ï¼Œç‚¹å‡»å¯ä»¥è‡ªåŠ¨æ‰“å¼€ `iPhone` æœ¬åœ° `App Store` å¹¶è·³è½¬åˆ°ç›¸åº” `App` çš„ä¸‹è½½é¡µé¢ï¼Œ

ä½†æ˜¯å½“æ¢æˆ `WKWebView` æ—¶ï¼Œæˆ‘ä»¬å‘ç°ç‚¹å‡» `App Store Links` æ—¶ï¼Œæœ‰æ—¶å€™æ— ååº”ï¼Œæœ‰æ—¶åˆ™ä¼šæ‰“å¼€ç›¸åº” `App` çš„ `App Store Web` é¡µé¢ï¼Œè€Œä¸ä¼šç›´æ¥è°ƒèµ·æœ¬åœ° `App Store`ã€‚

å¦å¤–ï¼Œå¯¹äºè‡ªå®šä¹‰çš„ `URL Scheme` ç±»å‹é“¾æ¥ï¼Œåœ¨ `WKWebView` é‡Œç›´æ¥ç‚¹å‡»åˆ™ä¼šæŠ¥é”™ï¼š`Error Domain=NSURLErrorDomain Code=-1002 "unsupported URL"`

æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ `WKWebView` å³å°†åŠ è½½æŸä¸€ URL æ—¶ï¼Œå¯¹è¿™ä¸¤ç§æƒ…å†µåšä¸€ä¸‹å¤„ç†ï¼Œä¿®æ”¹ `WKWebView` çš„ `delegate` ä¸­çš„ `webView:decidePolicyForNavigationAction:decisionHandler:` æ–¹æ³•ï¼Œå½“é‡åˆ°ä¸Šè¿°ä¸¤ç§é“¾æ¥æ—¶ï¼Œæˆ‘ä»¬äº¤ç»™ç³»ç»Ÿçš„ `[[UIApplication sharedApplication] openURL:xxx]` æ¥å¤„ç†å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š

```objc
- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler {
    
    NSURL *url = navigationAction.request.URL;
    NSString *urlString = (url) ? url.absoluteString : @"";
    
    // iTunes: App Store link
    // ä¾‹å¦‚ï¼Œå¾®ä¿¡çš„ä¸‹è½½é“¾æ¥: https://itunes.apple.com/cn/app/id414478124?mt=8
    if ([urlString containsString:@"//itunes.apple.com/"]) {
        [[UIApplication sharedApplication] openURL:url];
        decisionHandler(WKNavigationActionPolicyCancel);
        return;
    }
    
    // Protocol/URL-Scheme without http(s)
    else if (url.scheme && ![url.scheme hasPrefix:@"http"]) {
        [[UIApplication sharedApplication] openURL:url];
        decisionHandler(WKNavigationActionPolicyCancel);
        return;
    }
    
    decisionHandler(WKNavigationActionPolicyAllow);
}
```

å…³äºä½¿ç”¨ `WKWebView` çš„æ›´å¤š `Tips`ï¼Œå¯ä»¥å‚è€ƒ `https://github.com/ShingoFukuyama/WKWebViewTips`

Objective-Cä¸­è‡ªå®šä¹‰æ³›å‹ç±»
----

**ä½œè€…**: [å—å³°å­_è€é©´](https://weibo.com/touristdiary)

æœ€è¿‘çœ‹ `Facebook` çš„ `promise` æºç ï¼Œçœ‹åˆ° `FBLPromise` ç±»å®šä¹‰ä¸ºä¸€ä¸ªæ³›å‹ç±»ï¼Œæ‰€ä»¥å°±æ¸©ä¹ ä¸€ä¸‹ã€‚

è‹¹æœåœ¨2015å¹´å°±ä¸º Objective-C å¢åŠ äº†æ³›å‹ã€‚æˆ‘ä»¬ç°åœ¨ç”¨ `Array` ã€`Dictionary` ã€`Set` ã€`HashTable` è¿™äº›ç±»æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³›å‹æ¥æŒ‡å®šå…ƒç´ çš„ç±»å‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ³›å‹ç±»ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª `Queue` æ³›å‹ç±»ï¼Œå¹¶ä½¿ç”¨äº† `ObjectType` ä½œä¸ºæ³›å‹ç±»å‹çš„å ä½ç¬¦ã€‚ç„¶å `ObjectType` å°±å¯ä»¥ç”¨äº `Queue` ç±»çš„å±æ€§ã€æ–¹æ³•å‚æ•°ã€æˆå‘˜å˜é‡ä¸­ï¼Œä½œä¸ºè¿™äº›å€¼çš„ç±»å‹ã€‚

```objc
@interface Queue<ObjectType> : NSObject

- (void)enqueue:(ObjectType)value;
- (ObjectType)dequeue;

@end

@implementation Queue {
    NSMutableArray *_array;
}

- (instancetype)init {
    self = [super init];
    
    if (self) {
        _array = [[NSMutableArray alloc] init];
    }
    
    return self;
}

- (void)enqueue:(id)value {
    [_array addObject:value];
}

- (id)dequeue {
    if (_array.count > 0) {
        id value = _array[0];
        [_array removeObjectAtIndex:0];
        return value;
    }
    
    return nil;
}

- (NSString *)description {
    return [NSString stringWithFormat:@"The queue is [%@]", _array];
}

@end
```

ä¸è¿‡æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š

1. `ObjectType` åªèƒ½ç”¨äºç±»çš„å£°æ˜ä¸­ï¼Œå³ `@interface` å’Œ å¯¹åº”çš„ `@end` åŒºé—´å†…ã€‚å¦‚æœç”¨åœ¨ç±»çš„å®ç°ä¸­ï¼Œå³ `@implementation` ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œæç¤º â€œ`Excepted a type`â€ã€‚å› æ­¤ï¼Œåœ¨ `@implementation` ä¸­ï¼Œå¯¹åº”çš„éœ€è¦æ”¹æˆ `id` ã€‚å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼›

2. åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†æ³›å‹ç±»å‹ï¼Œé‚£ä¹ˆåœ¨å…·ä½“ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¿åäº†è§„åˆ™ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ä¸è¿‡ä»…æ­¤è€Œå·²ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œä½ ä¾ç„¶å¯ä»¥ä¼ é€’å…¶å®ƒç±»å‹çš„å€¼ã€‚å½“ç„¶ï¼Œå¦‚æœåˆ›å»ºå¯¹è±¡æ—¶æ²¡æœ‰æŒ‡å®šæ³›å‹ç±»å‹ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šç»™å‡ºè­¦å‘Šï¼›

```objc
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        // insert code here...
        NSLog(@"Hello, World!");
        
        Queue<NSNumber *> *queue = [[Queue alloc] init];
        [queue enqueue:@123];
        [queue enqueue:@"abc"];		// Warning: Incompatible pointer types sending 'NSString *' to parameter of type 'NSNumber *'
        
        NSLog(@"%@", queue);
    }
    return 0;
}
```

Objective-C çš„æ³›å‹æ˜¯æ‰€è°“çš„ `Lightweight Generics`ï¼Œä¸»è¦æ˜¯ä¸ºäº†å’Œ Swift åšæ··ç¼–ï¼ŒåŒæ—¶ä¿è¯äº†ä¸ä¹‹å‰ç‰ˆæœ¬çš„å…¼å®¹æ€§ã€‚

Objective-C æ³›å‹çš„åå˜ä¸é€†å˜
----
**ä½œè€…**: [å—å³°å­_è€é©´](https://weibo.com/touristdiary)

Objective-C å¼•å…¥æ³›å‹åï¼Œå°±å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```objc
@interface Base : NSObject
@end

@implementation Base
@end

@interface Sub : Base
@end

@implementation Sub
@end

@interface Queue<ObjectType> : NSObject

- (void)enqueue:(ObjectType)value;
- (ObjectType)dequeue;

@end

@implementation Queue

- (void)enqueue:(__unused id)value {}
- (id)dequeue { return nil; }

@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Queue<Sub *> *subQueue = [[Queue alloc] init];
        Queue<Base *> *queue = subQueue; // Warning: Incompatible pointer types initializing 'Queue<Base *>' with an expression of type 'Queue<Sub *>'
        
        [queue enqueue:[Sub new]];
    }
    return 0;
}
```

`Sub` æ˜¯ `Base` çš„å­ç±»ï¼Œå¦‚æœæˆ‘å°†ä¸€ä¸ª `Queue<Sub *>` ç±»å‹çš„å¯¹è±¡æŒ‡æ´¾ç»™ `Queue<Base *>` å¯¹è±¡ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªç±»å‹å®é™…ä¸Šæ˜¯ä¸åŒçš„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šåšå¼ºåˆ¶è½¬æ¢ã€‚å¦‚æœå¸Œæœ›å­ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºçˆ¶ç±»å‹ï¼Œå°±æ¶‰åŠåˆ°æ³›å‹çš„ â€œåå˜(covariant)â€ æ“ä½œã€‚å¯ä»¥åœ¨ `Queue` å£°æ˜ä¸­ï¼Œå¯¹æ³›å‹ç±»å‹åŠ ä¸Š `__covariant` ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºå…ƒç´ å¯ä»¥æ¥å—å­ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```objc
@interface Queue<__covariant ObjectType> : NSObject

- (void)enqueue:(ObjectType)value;
- (ObjectType)dequeue;

@end
```

å½“ç„¶ï¼Œå¦‚æœæƒ³åè¿‡æ¥ï¼Œå°† `Queue<Base *>` ç±»å‹çš„å¯¹è±¡æŒ‡æ´¾ç»™ `Queue<Sub *>` ç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥åŠ ä¸Š `__contravariant` ä¿®é¥°ç¬¦ï¼Œç§°ä¸º â€œé€†å˜â€ï¼Œè¡¨ç¤ºå¯ä»¥æ¥å—çˆ¶ç±»ç±»å‹å…ƒç´ ã€‚

å¦å¤–æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š

1. å¦‚æœå£°æ˜å¯¹è±¡æ—¶ï¼Œä¸æŒ‡å®šæ³›å‹ç±»å‹ï¼Œç›´æ¥ç”¨ `Queue`ï¼Œé‚£ä¹ˆå¯ä»¥å’Œ `Queue<Base *>` ã€ `Queue<Sub *>` äº’ç›¸è½¬æ¢ï¼›
2. è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼›æ ¹æ® `Mike Ash` çš„æè¿°ï¼Œè¿˜æœ‰ä¸€ä¸ªæ‰€è°“çš„ â€œ`åŒå˜æ€§(bivariance)`â€ï¼Œå³åŒæ—¶æ¥å—çˆ¶ç±»å’Œå­ç±»ï¼Œä¸è¿‡è¿™ç§æƒ…å†µåœ¨ Objective-C é‡Œé¢ä¸å­˜åœ¨ï¼›

å‚è€ƒï¼š[Friday Q&A 2015-11-20: Covariance and Contravariance](https://www.mikeash.com/pyblog/friday-qa-2015-11-20-covariance-and-contravariance.html)

å†è°ˆ timer ä¹‹ CFRunLoopTimerRef
----
**ä½œè€…**: [Lefe_x](https://weibo.com/u/5953150140)

é˜…è¯»æœ¬å°é›†å¯ä»¥å‚è€ƒä»¥å‰çš„ä¸€ç¯‡å°é›†ã€Œ å®šæ—¶å™¨å¼•å‘çš„æ€è€ƒ ã€

å­¦ä¹  `RunLoop` çš„çŸ¥è¯†æ—¶å¦‚æœæœ‰ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘æƒ³å¯¹ç†è§£ `RunLoop` æœ‰å¾ˆå¤§å¸®åŠ©ã€‚è€Œ `timer` å’Œ `RunLoop` æ¯æ¯ç›¸å…³ã€‚æ²¡æœ‰ `RunLoop` ï¼Œ`timer` ä¸ä¼šè·‘èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸æŠŠ `timer` æ·»åŠ åˆ° `RunLoop` ä¸­ï¼Œ`timer` å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚è€Œä¸” `RunLoop` å’Œçº¿ç¨‹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœéä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œåªæœ‰è¿è¡Œ `RunLoop` æ—¶å®ƒæ‰ä¼šåˆ›å»º `RunLoop`ã€‚

åœ¨éä¸»çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨:

```objc
[self performSelectorInBackground:@selector(createTimerInOtherThread) withObject:nil];
```

ç”±äºå‡½æ•° `createTimerInOtherThread` ä¸åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `[NSThread currentThread]` è·å–å½“å‰çš„çº¿ç¨‹ï¼Œä½¿ç”¨ `CFRunLoopGetCurrent()` è·å–å½“å‰çš„ `RunLoop`ã€‚ç”±äºåªæœ‰ä¸»çº¿ç¨‹çš„ `RunLoop` æ‰ä¼šå¼€å¯ï¼Œè€Œå…¶ä»–çº¿ç¨‹çš„ `RunLoop` éœ€è¦é€šè¿‡ `CFRunLoopRun()` æ‰‹åŠ¨å¼€å¯ã€‚

æ³¨æ„è¿™é‡Œå‘ç°ä¸€ä¸ªè¯¡å¼‚çš„é—®é¢˜ã€‚æ‰§è¡Œ `CFRunLoopRun()` åï¼Œå®ƒåé¢çš„ä»£ç å°†åœ¨ `RunLoop` åœæ­¢åæ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸º `RunLoop` ç›¸å½“äºä¸€ä¸ªå¾ªç¯ï¼Œå¾ªç¯ç»“æŸåå®ƒåé¢çš„ä»£ç æ‰ä¼šæ‰§è¡Œã€‚

```objc
- (void)createTimerInOtherThread
{
    CFAllocatorRef allocator = kCFAllocatorDefault;
    CFAbsoluteTime fireDate = CFAbsoluteTimeGetCurrent();
    CFTimeInterval interval = 2.0;
    CFOptionFlags flag = 0;
    CFIndex index = 0;
    
    // å®šæ—¶å™¨çš„å›è°ƒ
    CFRunLoopTimerCallBack callback = lefexTimerAction;
    
    // å®šæ—¶å™¨ä¸Šä¸‹æ–‡
    CFRunLoopTimerContext context = {0, (__bridge void *)(self), NULL, NULL, NULL};
    
    // åˆ›å»ºå®šæ—¶å™¨
    CFRunLoopTimerRef timer = CFRunLoopTimerCreate(allocator, fireDate, interval, flag, index, callback, &context);
    
    // è·å–å½“å‰çº¿ç¨‹çš„ runloppï¼Œå¹¶ä¸”å¼€å¯ runLoop å®šæ—¶å™¨æ‰èƒ½æ­£å¸¸æ‰§è¡Œ
    threadRunloop = CFRunLoopGetCurrent();
    currentThread = [NSThread currentThread];
    
    // æŠŠtimeræ·»åŠ åˆ°runloopä¸­ï¼Œtimerå°†ä¼šè·‘èµ·æ¥
    CFRunLoopAddTimer(threadRunloop, timer, kCFRunLoopCommonModes);
    
    // åœ¨ run ä¹‹åçš„ä»£ç å°†ä¸ä¼šæ‰§è¡Œ
    CFRunLoopRun();
    
    // ä¸‹é¢è¿™è¡Œæ‰“å°å°†åœ¨åœæ­¢ runLoop åæ‰§è¡Œã€‚
    NSLog(@"runLoop stop");
}
```

å®šæ—¶å™¨è·‘èµ·æ¥åï¼Œå®ƒçš„å›è°ƒå‡½æ•°å°†è¢«æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°å°†åœ¨å®ƒæ‰€åœ¨çš„ `RunLoop` å¯¹åº”çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚å¦‚æœ `timer` è¢«æ·»åŠ åˆ° `mainRunLoop` å›è°ƒå‡½æ•°åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚

```objc
void lefexTimerAction(CFRunLoopTimerRef timer, void *info){
	NSLog(@"timer called on thread: %@", [NSThread currentThread]);
}
```

å½“ä¸åœ¨ä½¿ç”¨ `timer` æ—¶éœ€è¦é‡Šæ”¾æ‰ `timer`ï¼Œè€Œå…¶å®ä¹Ÿå¯ä»¥ç›´æ¥åœæ­¢ `RunLoop` çš„è¿è¡Œ ï¼ˆé€šè¿‡ `CFRunLoopStop(threadRunLoop)`ï¼‰ï¼Œ`timer` ä¹Ÿä¼šåœæ­¢ã€‚

```objc
- (void)invalidTimer:(CFRunLoopTimerRef)timer
{
  if (timer) {
    CFRunLoopTimerInvalidate(timer);
    CFRelease(timer);
    timer = 0;
  }

  if (threadRunloop) {
  // å¦‚æœä¸æš‚åœ runLoopï¼Œå½“å‰å¯¹è±¡ä¸ä¼šé‡Šæ”¾
  CFRunLoopStop(threadRunloop);
  threadRunLoop = NULL;}
}
```

è§£å†³XcodeçœŸæœºæ— æ³•è”è°ƒçš„é‡è·¯å­
------
**ä½œè€…**: [é«˜è€å¸ˆå¾ˆå¿™](https://weibo.com/517082456)

æœ€è¿‘åœ¨çœŸæœºè”è°ƒçš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ° `App installation failed.<Could not write to the device.>` çš„é”™è¯¯æç¤ºï¼Œæ‰€ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/2.jpg?raw=true)

ç½‘ä¸Šçš„è§£å†³ä¹Ÿæ˜¯äº”èŠ±å…«é—¨ï¼Œæ¯”å¦‚è¯´åˆ é™¤ `App` é‡æ–° `Run`ï¼Œ`Clean` ç­‰ï¼Œå‘ç°å¹¶æ²¡æœ‰èµ·ä»€ä¹ˆåµç”¨ï¼Œå¹¶ä¸”è¿˜ä¼šå ç”¨å¾ˆå¤šå¼€å‘æ—¶é—´ã€‚æƒ³æƒ³ä¸€ä¸ªå¤§å‹é¡¹ç›®è¦é‡æ–°ç¼–è¯‘æ˜¯ä¸€ä»¶å¤šä¹ˆå¯æ€•çš„äº‹æƒ…ã€‚å¥½å˜›ï¼Œé‡ç‚¹æ¥äº†ï¼Œå›¾ä¸­è¿™ç§é”™è¯¯ï¼Œæœ‰ä¸€ä¸ªç®€å•è€Œåˆæœ‰æ•ˆçš„éå®˜æ–¹è§£å†³æ–¹æ¡ˆâ€”â€”éšä¾¿æ‰¾ä¸€ä¸ª `.h` æˆ–è€… `.m` è¿›è¡Œä¸€ä¸‹å¢åˆ æ”¹å³å¯ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Œå±¡è¯•ä¸çˆ½ã€‚`<iPhone has denied the launch request>` è¿™ç§é”™è¯¯ä¹Ÿå¯ä»¥ç”¨è¿™ç§è§£å†³æ–¹æ¡ˆã€‚

åˆ©ç”¨ Git-hook è‡ªåŠ¨é…ç½®ä¸åŒä»“åº“çš„ç”¨æˆ·ä¿¡æ¯
----
**ä½œè€…**: [halohily](https://weibo.com/halohily)

> é—®é¢˜çš„èµ·å› æ¥è‡ªäºæŸå¤©ä¸€ä½åŒå­¦çš„é—®é¢˜ï¼šâ€œæˆ‘ç»™ä¸€ä¸ªçŸ¥åå¼€æºé¡¹ç›®æäº¤äº†ä»£ç ï¼Œä¹Ÿè¢«åˆå¹¶äº†ï¼Œä¸ºä»€ä¹ˆ `contributors` é‡Œé¢æ²¡æœ‰æˆ‘ï¼Ÿâ€å…¶å®ï¼Œè¿™å¤šæ˜¯å› ä¸ºæäº¤ä»£ç æ—¶æœ¬åœ°ä»“åº“çš„`user.name`ã€`user.email`ä¸GitHubè´¦å·ä¸åŒ¹é…å¯¼è‡´ï¼Œåªæœ‰æäº¤ä»£ç æ—¶çš„ç”¨æˆ·è®¾ç½®ä¸è‡ªå·±çš„ `GitHub` è´¦å·ç›¸åŒ¹é…æ—¶ï¼Œå„é¡¹æ•°æ®æ‰ä¼šè¢« `GitHub` è®¡å…¥ç»Ÿè®¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ ·çš„ `commit` è®°å½•ä¾¿æ¥è‡ªäºä¸€ä¸ªç”¨æˆ·è®¾ç½®å’Œæˆ‘ `GitHub` è´¦å·ä¸åŒ¹é…çš„æœ¬åœ°ä»“åº“ã€‚

![å›¾1](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/4-1.jpg?raw=true)

å¦‚æœä½ ä¸ä»…ä½¿ç”¨ `GitHub` ï¼Œè¿˜ä¼šå‘å…¬å¸è‡ªå»ºçš„ `GitLab` ï¼Œä»¥åŠ `oschina` ã€`coding.net` ç­‰åŸºäº `Git` çš„æ‰˜ç®¡æœåŠ¡å•†æäº¤ä»£ç ï¼Œé‚£ä¹ˆä¾¿ä¼šé¢ä¸´è¿™ä¸ªé—®é¢˜ï¼šä½ éœ€è¦ä¸ºä¸åŒæ¥æºçš„ `Git` ä»“åº“ä¸€ä¸€é…ç½®ç”¨æˆ·åä¸é‚®ç®±ä¿¡æ¯ï¼Œæ¥é¿å…ä¸Šè¿°çš„ä¸åŒæ­¥æƒ…å†µã€‚ç„¶è€Œï¼Œæ‰‹åŠ¨åœ¨æ¯ä¸ªæœ¬åœ°ä»“åº“è·¯å¾„ä¸‹éƒ½ä½¿ç”¨ `git config user.name` å’Œ `git config user.email` å‘½ä»¤ï¼Œéš¾å…ä¼šæœ‰å¿˜è®°çš„æƒ…å†µï¼Œä¹Ÿè¿‡äºç¹çã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨**Gitåˆå§‹æ¨¡æ¿ã€é’©å­å‡½æ•°**çš„ç‰¹æ€§ï¼Œè¾¾åˆ°åœ¨**æ¯æ¬¡cloneä¸€ä¸ªæ–°çš„ä»“åº“æ—¶ï¼Œæ ¹æ®ä»“åº“æ¥æºåŸŸåçš„ä¸åŒï¼Œè‡ªåŠ¨é…ç½®ä¸åŒçš„ç”¨æˆ·ä¿¡æ¯**ã€‚

- é¦–å…ˆï¼Œåœ¨å‘½ä»¤è¡Œä½¿ç”¨è¯¥å‘½ä»¤å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼š`mkdir -p ~/.git-templates/hooks`

- ç„¶åé…ç½®gitï¼Œè®©gitçŸ¥é“è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ä½ çš„æ¨¡æ¿æ–‡ä»¶å¤¹ï¼š`git config --global init.templatedir ~/.git-templates`

- æ¥ä¸‹æ¥ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ–°å»ºé’©å­æ–‡ä»¶ï¼š`vi ~/.git-templates/hooks/post-checkout`

  é’©å­æ–‡ä»¶çš„å†…å®¹è¾ƒé•¿ï¼Œå¯åœ¨æ–‡æœ«é™„å¸¦çš„é“¾æ¥ä¸­æŸ¥çœ‹å¤åˆ¶å³å¯ï¼Œå®Œæˆä¹‹åèµ‹äºˆè¿™ä¸ªæ–‡ä»¶å¯æ‰§è¡Œæƒé™ï¼š`chmod +x ~/.git-templates/hooks/post-checkout`

- æœ€åï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼š`vi ~/.git-clone-init`

  æœ€åä¸€ä¸ªæ–‡ä»¶æ˜¯å”¯ä¸€ä¸€ä¸ªå†…å®¹éœ€è¦è‡ªå·±é…ç½®çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ•´ä¸ªè¿‡ç¨‹çš„å…³é”®ï¼Œå†…å®¹æ ¼å¼å¦‚å›¾2ï¼Œæ„ä¸ºå¯¹åº”ä¸åŒåŸŸåä¸‹çš„ä»“åº“ï¼Œè‡ªåŠ¨é…ç½®ä¸åŒçš„`user.name`å’Œ`user.email`ã€‚
  
![å›¾2](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/4-2.jpg?raw=true)

**æ•´ä¸ªè¿‡ç¨‹çš„åŸç†å°±æ˜¯æˆ‘ä»¬åœ¨æ‰§è¡Œå…‹éš†æ“ä½œæ—¶ï¼Œgitä¼šæ‰§è¡Œåˆå§‹æ¨¡æ¿é‡Œçš„é’©å­æ–‡ä»¶ï¼Œé’©å­æ–‡ä»¶æ ¹æ®git-clone-initæ–‡ä»¶å®šä¹‰çš„è§„åˆ™ï¼Œè‡ªåŠ¨é…ç½®ç”¨æˆ·åä¸é‚®ç®±ä¿¡æ¯ã€‚è¿™å¥—æµç¨‹æ¥è‡ªäºä¸€ä¸ªGitHubå¼€æºåº“ï¼Œç›®å‰starè¿˜å¾ˆå°‘ï¼Œå¤§å®¶å¯ä»¥å»æ”¯æŒä¸€ä¸‹~**

å‚è€ƒï¼š

1. [DrVanScott/git-clone-init](https://github.com/DrVanScott/git-clone-init)
2. [è®©ä½ çš„gitæ‹¥æœ‰ä¸åŒèº«ä»½](https://segmentfault.com/a/1190000013283182)

åº”ç”¨ icon è¢« Cocoapods â€œåƒæ‰â€çš„è§£å†³æ–¹å¼
----
**ä½œè€…**: [Vong_HUST](https://weibo.com/VongLo)

æœ€è¿‘åœ¨åšæ¨¡å—åŒ–ç›¸å…³çš„äº‹æƒ…ï¼Œå’Œ `Cocoapods` é¢‘ç¹æ¥è§¦ï¼Œä¹Ÿè¸©äº†ä¸€äº›å‘ï¼Œä»Šå¤©ä¸»è¦åˆ†äº«ä¸€ä¸‹æœ€è¿‘é‡åˆ°çš„ä¸€ä¸ª `bug`ã€‚

åšæ¨¡å—åŒ–çš„æ—¶å€™ï¼Œä¸åŒæ¨¡å—ä¼šæœ‰ä¸€ä¸ªè‡ªå·±ç‹¬ç«‹çš„ `repo`ï¼Œç„¶åæœ‰è‡ªå·±çš„å„ç§èµ„æºï¼Œæˆ‘ä»¬é‡‡å–çš„æ–¹å¼æ˜¯å°†å›¾ç‰‡æ”¾åˆ° `.xcassets` æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæ‰“åˆ° `bundle` å½“ä¸­ï¼Œå¤§æ¦‚æ–¹å¼å¦‚å›¾ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/3-1.jpg?raw=true)

æ”¾åˆ° `bundle` çš„ `.xcassets` æ˜¯ä¸ºäº†é˜²æ­¢å›¾ç‰‡å’Œä¸»å·¥ç¨‹æˆ–è€…å…¶å®ƒæ¨¡å—ä¸­å›¾ç‰‡é‡å

`run` èµ·æ¥ï¼Œä¸€åˆ‡å›¾ç‰‡ç­‰èµ„æºè¯»å–éå¸¸æ­£å¸¸ï¼ˆèµ„æºçš„è¯»å–æ„Ÿè§‰åé¢æœ‰æœºä¼šå†å†™ä¸€ç¯‡æ–‡ç« å•ç‹¬ä»‹ç»äº†ï¼‰ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ `Home` å‡ºå»çš„æ—¶å€™ï¼Œå‘ç°åº”ç”¨çš„ `icon` æ²¡äº†ï¼Œå˜æˆäº†é»˜è®¤çš„é‚£ç§ç©ºç™½å›¾æ ‡ğŸ˜‚ï¼ŒWTFï¼

æœæ–­åˆ° `CocoaPods` å®˜æ–¹ `repo` ä¸­å¯»æ±‚ä¸€æ³¢æ´åŠ©ï¼Œå‘ç°æœ‰äººæäº†ç±»ä¼¼çš„ [issue](https://github.com/CocoaPods/CocoaPods/issues/7003) æœ‰äººæå‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œäº²æµ‹å¯è¡Œã€‚

åŸå› æ˜¯ `Xcode` åœ¨ `"Copy Bundle Resources"` é˜¶æ®µç¼–è¯‘ `.xcassets` åŠ äº† `--app-icon` å‚æ•°ï¼Œè€Œ `"[CP] Copy Pods Resources"` é˜¶æ®µæ²¡æœ‰åŠ è¿™ä¸ªå‚æ•°ï¼Œè€Œä¸”è¦†ç›–äº†ç¼–è¯‘å‡ºæ¥çš„ `Assets.car`ã€‚è§£å†³æ–¹å¼å°±æ˜¯åœ¨ç¬¬ä¸€æ­¥åŠ ä¸Šè¿™ä¸ªå‚æ•°ã€‚è§£å†³æ–¹å¼å¦‚ä¸‹å›¾ï¼Œåœ¨ `podfile` ä¸­åŠ å…¥å‚è€ƒé“¾æ¥ä¸­çš„è„šæœ¬å†…å®¹ã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/3-2.jpg?raw=true)

è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå›¾ç‰‡å…¨éƒ¨æ”¾åˆ° `bundle`ï¼Œä¸æ”¾åœ¨ `.xcassets` çš„å½¢å¼ï¼Œä¹Ÿæ˜¯äº²æµ‹å¯è¡Œã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¸å¤ªä¼˜é›…ï¼Œå› ä¸ºå¯èƒ½å¯¼è‡´å›¾ç‰‡é‡åï¼Œè¯»å–é”™è¯¯ã€‚

å‚è€ƒï¼š

1. [issue è§£å†³æ–¹æ¡ˆ](https://github.com/CocoaPods/CocoaPods/issues/7003#issuecomment-328045681)
2. [resource_bundles or resources](http://zhoulingyu.com/2018/02/02/pod-resource-reference/)

ä¸‰ä¸ªæ‰“å°ç±»ä¿¡æ¯çš„ç§æœ‰æ–¹æ³•
----
**ä½œè€…**: [å—å³°å­_è€é©´](https://weibo.com/touristdiary)

æƒ³åœ¨ `NSLog` æ‰“å°å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œæ— æ„ä¸­æ‰¾åˆ°äº†çœ‹åˆ° `Extended Type Info in Objective-C` è¿™ç¯‡æ–‡ç« ï¼Œå‘ç°äº† `NSObject` çš„æ‰“å°ç±»ç›¸å…³ä¿¡æ¯çš„ä¸‰ä¸ªç§æœ‰æ–¹æ³•ï¼Œåˆ†äº«ä¸€ä¸‹ï¼š

1. `_methodDescription/_shortMethodDescription`ï¼šæ‰“å°æ¥æ”¶è€…çš„æ‰€æœ‰å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰æ–¹æ³•ï¼›
2. `_ivarDescription`ï¼šæ‰“å°æ¥æ”¶è€…çš„æˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬ç±»å‹å’Œå€¼ï¼›

æˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨è¿™å‡ ä¸ªæ–¹æ³•ï¼š

```objc
UIView *view = [[UIView alloc] init];
NSLog(@"%@", [view performSelector:@selector(_ivarDescription)]);
```

æ‰“å°çš„ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºã€‚

```
<UIView: 0x7fa18a7022d0>:
in UIView:
	_constraintsExceptingSubviewAutoresizingConstraints (NSMutableArray*): nil
	_cachedTraitCollection (UITraitCollection*): nil
	_layer (CALayer*): <CALayer: 0x604000222ac0>
	_layerRetained (CALayer*): <CALayer: 0x604000222ac0>
	_enabledGestures (int): 0
	_gestureRecognizers (NSMutableArray*): nil
	_window (UIWindow*): nil
	_subviewCache (NSArray*): nil
	_templateLayoutView (UIView*): nil
	_charge (float): 0
	_tag (long): 0
	_viewDelegate (UIViewController*): nil
	_backgroundColorSystemColorName (NSString*): nil
	_countOfMotionEffectsInSubtree (unsigned long): 0
	_unsatisfiableConstraintsLoggingSuspensionCount (unsigned long): 0
	_countOfTraitChangeRespondersInDirectSubtree (unsigned long): 1
	_cachedScreenScale (double): 0
	_viewFlags (struct ?): {
		userInteractionDisabled (b1): NO
		implementsDrawRect (b1): NO
		implementsDidScroll (b1): NO
		implementsMouseTracking (b1): NO
		implementsIntrinsicContentSize (b1): NO
		hasBackgroundColor (b1): NO
		......
```

å¦‚æœå¯¹è¿™äº›ä¿¡æ¯æ„Ÿå…´è¶£ï¼Œå¯ä»¥é‡å†™ç±»çš„ `debugDescription()` æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢è°ƒç”¨ä¸Šé¢å‡ ä¸ªæ–¹æ³•ã€‚

éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šè¿™äº›æ–¹æ³•åœ¨æ˜¯ `iOS 7+` ä¸­ï¼Œåœ¨ `UIKit` é‡Œé¢å®ç°çš„ï¼Œæ‰€ä»¥åœ¨ `Mac OS` ä¸­ç”¨ä¸äº†ï¼Œå¯ä»¥å°è¯•å»ºä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œçœ‹çœ‹ç»“æœã€‚

å‚è€ƒï¼š[Extended Type Info in Objective-C](http://bou.io/ExtendedTypeInfoInObjC.html)

æ¢ä¸€ç§ Hook çš„å§¿åŠ¿
----
**ä½œè€…**: [Lefe_x](https://weibo.com/u/5953150140)

å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä¸ºäº†æ»¡è¶³éœ€æ±‚ï¼Œé€šå¸¸ä¼š `Hook` ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹åº“çš„ä¸€äº›æ–¹æ³•ã€‚æ¯æ¬¡å†™ä¸€é•¿ä¸²æ¨¡ç‰ˆä»£ç ï¼Œæ˜¯ä¸æ˜¯å¾ˆç—›è‹¦ï¼Ÿ

å…¶å®å¯ä»¥æ¢ä¸€ç§ `Hook` çš„å§¿åŠ¿ ------ ä½¿ç”¨ `CaptainHook` åº“ã€‚å®ƒéå¸¸å‹å¥½åœ°æä¾›ä¸€äº›å®æ¥ `Hook` æŸäº›æ–¹æ³•ã€‚å…¶å®åœ¨é€†å‘ä¸­ï¼Œå¼€å‘è€…é€šå¸¸ä½¿ç”¨è¿™ä¸ªåº“æ¥ `Hook` ä¸€äº›æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚æ¯”å¦‚ä½¿ç”¨ `class-dump` å¯¼å‡ºæŸä¸ªé¡¹ç›®çš„å¤´æ–‡ä»¶ï¼Œç„¶åæ›¿æ¢æ‰éœ€è¦ `Hook` çš„æ–¹æ³•ã€‚

ç®€å•ä¸¾ä¸ªä¾‹å­ï¼š

æ›¿æ¢æ‰ `HookObject` ç±»ä¸­çš„ `hookMe` å’Œ `userName` æ–¹æ³•ã€‚

```
// å£°æ˜è¦ Hook çš„ç±»ï¼ŒHookObject æ˜¯å·²ç»å£°æ˜çš„ä¸€ä¸ªç±»
CHDeclareClass(HookObject);

// Hook æ— è¿”å›å€¼ï¼Œæ— å‚æ•°çš„æ–¹æ³•
CHMethod0(void, HookObject, hookMe){
    NSLog(@"I am a hook method: hookMe");
    CHSuper0(HookObject, hookMe);
}
// Hook æœ‰è¿”å›å€¼ï¼Œæ— å‚æ•°çš„æ–¹æ³•
CHMethod0(NSString *, HookObject, userName){
    NSLog(@"I am a hook method: userName");
    return CHSuper0(HookObject, userName);
}
// æ„é€  Hook çš„ç±»
CHConstructor{
    CHLoadClass(HookObject);
    CHHook0(HookObject, hookMe);
    CHHook0(HookObject, userName);
}
```

å‚è€ƒï¼š[CaptainHook](https://github.com/rpetrich/CaptainHook/wiki)

è§£å†³ä¿®æ”¹ xcconfig é…ç½®ç‰ˆæœ¬å·å’Œ build å·ä¸ç”Ÿæ•ˆçš„é—®é¢˜
-------
**ä½œè€…**: [é«˜è€å¸ˆå¾ˆå¿™](https://weibo.com/517082456)

ä¹‹å‰æˆ‘æœ‰ä»‹ç»è¿‡ `xcconfig` è¿™ä¸ª tipï¼Œæœ€è¿‘ä½¿ç”¨ä¸­é‡åˆ°äº†ä¸€ç‚¹å°é—®é¢˜ï¼šå½“æˆ‘ä½¿ç”¨ `xcconfig` æ¥ç®¡ç†ç‰ˆæœ¬å·å’Œ `build` å·æ—¶ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œ

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-1.jpg?raw=true)

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-2.jpg?raw=true)

ç¼–è¯‘ä¸€æ¬¡ä¹‹åï¼Œä¿®æ”¹è¿™ä¸¤ä¸ªå€¼ï¼Œæ­¤æ—¶æˆ‘åœ¨è¿è¡Œçš„æ—¶å€™æƒ³æŠŠè¿™ä¸¤ä¸ªå€¼è¯»å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-3.jpg?raw=true)

å‘ç°è¯»å‡ºæ¥çš„ä¾ç„¶æ˜¯ä¿®æ”¹ä¹‹å‰çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-4.jpg?raw=true)

æ­¤æ—¶æ‰“å¼€ `Product` ä¸‹é¢çš„ `Demo.app` æ–‡ä»¶ï¼ŒæŸ¥çœ‹ `Info.plist` æ–‡ä»¶å‘ç°ï¼Œé‡Œé¢æœç„¶æ˜¾ç¤ºçš„è¿˜æ˜¯è€å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-5.jpg?raw=true)

è¿™æ˜¯å› ä¸ºä½¿ç”¨ `xcconfig` ç®¡ç†è¿™ä¸¤ä¸ªå€¼åï¼Œ`Info.plist` ç”¨çš„è¿™ä¸¤ä¸ªå€¼æ˜¯ `User-Defined` å˜é‡ï¼Œå¹¶ä¸èƒ½æ£€æµ‹è¿™ä¸¤ä¸ªå˜é‡å†…å®¹æœ‰å˜æ›´å¯¼è‡´çš„ç¼“å­˜é—®é¢˜ã€‚æœ€ç®€å•çš„è§£å†³åŠæ³•å°±æ˜¯ `Clean` ä¸€ä¸‹ï¼Œå†è¿è¡Œå°±èƒ½æ˜¾ç¤ºæ­£ç¡®çš„å€¼äº†ï¼Œä½†å¯¹äºä¸­å¤§å‹é¡¹ç›®æ¥è¯´ `Clean` çš„æˆæœ¬æœ‰ç‚¹é«˜ï¼Œæ‰€ä»¥å°±æƒ³åˆ°äº†ç”¨è„šæœ¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œ

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/5-6.jpg?raw=true)

æ¯æ¬¡è¿è¡Œæ—¶æ›´æ–°è¿™ä¸¤ä¸ªç¼“å­˜ä¸­çš„å€¼å³å¯ã€‚

å¦‚æœæœ‰å…¶ä»–æ›´å¥½çš„è§£å†³åŠæ³•ï¼Œæ¬¢è¿åˆ†äº«ï¼




ä½¿ç”¨ Apple Configuration é…ç½®è‡ªåŠ¨åŠ å…¥ Wi-Fi
-----
**ä½œè€…**: [å—å³°å­_è€é©´](https://weibo.com/touristdiary)

é€šå¸¸æˆ‘ä»¬çš„ `iPhone` æ‰‹æœºéƒ½ä¼šè‡ªåŠ¨è¿æ¥å·²ç»è®°ä½çš„ `Wi-Fi` ç½‘ç»œï¼Œå¯¹äºä¸€äº›ä¼ä¸šçº§çš„ `WPA/WPA 2` ç½‘ç»œï¼Œå¦‚æœä¸èƒ½è‡ªåŠ¨åŠ å…¥çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±é…ç½®ä¸€ä¸ª `Wi-Fi` æè¿°æ–‡ä»¶æ¥åšè‡ªåŠ¨åŠ å…¥ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ â€œ`Apple Configuration`â€ æˆ–è€… â€œæè¿°æ–‡ä»¶ç®¡ç†å™¨â€ æ¥ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ˜¯ä½¿ç”¨ â€œ`Apple Configuration`â€ æ¥é…ç½®ï¼ˆæ–‡ä»¶ -> æ–°å»ºé…ç½®æ–‡ä»¶ï¼‰ï¼Œå½“ç„¶æˆ‘ä»¬éœ€è¦çŸ¥é“ `Wi-Fi` å®é™…çš„é…ç½®ï¼Œæ¯”å¦‚ç½‘ç»œåè®®æ¥å—çš„ `EAP` ç±»å‹ã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/8-1.png?raw=true)

é…ç½®å®Œæˆåä¿å­˜æˆä¸€ä¸ª `.mobileconfig` æ–‡ä»¶ï¼Œè¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ª `xml` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯å¯ä»¥é€šè¿‡ä»£ç çš„å½¢å¼æ¥ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/8-2.png?raw=true)

ç”Ÿæˆçš„ `.mobileconfig` æ–‡ä»¶å¯ä»¥ä½¿ç”¨ â€œ`Apple Configuration`â€ å¯¼å…¥åˆ°æ‰‹æœºé‡Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/8-3.png?raw=true)

å‰©ä¸‹çš„å°±æ˜¯åœ¨æ‰‹æœºä¸Šæ­£å¸¸å®‰è£…æè¿°æ–‡ä»¶çš„æµç¨‹ï¼Œéœ€è¦è¿›åˆ° â€œè®¾ç½® -> é€šç”¨ -> æè¿°æ–‡ä»¶â€ é‡Œé¢å®‰è£…è¿™ä¸ªæè¿°æ–‡ä»¶ã€‚å®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥è‡ªåŠ¨è¿æ¥ `Wi-Fi` äº†ã€‚

éœ€è¦æ³¨æ„çš„å‡ ä¸ªé—®é¢˜ï¼š

1. å¦‚æœæƒ³è¾“å…¥å¯†ç ï¼Œå¯ä»¥å‹¾é€‰â€œä½¿ç”¨å•æ¬¡è¿æ¥å¯†ç â€ï¼Œä¸è¿‡è¿™ä¸ªé€‰é¡¹ä¸èƒ½å’Œâ€œè‡ªåŠ¨åŠ å…¥â€åŒæ—¶ä½¿ç”¨ï¼›å¦‚æœä¸¤ä¸ªéƒ½å‹¾é€‰ä¼šé»˜è®¤ä½¿ç”¨â€œä½¿ç”¨å•æ¬¡è¿æ¥å¯†ç â€ï¼›
2. å¯ä»¥å¯¹é…ç½®æ–‡ä»¶åšç­¾åï¼Œä½†å¦‚æœç­¾ååï¼Œæ–‡ä»¶å°†ä¸èƒ½å†åšä¿®æ”¹ï¼›åŒæ—¶ä¿å­˜çš„æ–‡ä»¶å†…å®¹å˜æˆ16è¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½åƒä¿®æ”¹ `xml` æ–‡ä»¶é‚£æ ·æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶ï¼›
3. æœªç­¾åçš„ `xml` æ–‡ä»¶ï¼Œæ˜¯ä»¥æ˜æ–‡çš„å½¢å¼ä¿å­˜å¯†ç ï¼›
4. å¦‚æœéœ€è¦è¯ä¹¦è®¤è¯ï¼Œåˆ™è¦å°†ç›¸åº”çš„è¯ä¹¦é…ç½®åˆ°æè¿°æ–‡ä»¶ä¸­ï¼›
5. åœ¨çº¿å®‰è£…æè¿°æ–‡ä»¶çš„æ–¹å¼ä»…é™äº `Safari`ã€`Mail`ï¼›
6. ä½¿ç”¨ `portal` æ–¹å¼è®¤è¯çš„ç™»å½•æœ¨æœ‰éªŒè¯è¿‡ï¼›

å‚è€ƒï¼š

[å…³äºâ€œè‡ªåŠ¨åŠ å…¥â€å’Œå•ä¸€è¿æ¥å¯†ç  Wi-Fi æè¿°æ–‡ä»¶è®¾ç½®](https://support.apple.com/zh-cn/HT202343)

æ–­æ¡ˆé«˜æ‰‹ä¹‹otool
------------
**ä½œè€…**: [é«˜è€å¸ˆå¾ˆå¿™](https://weibo.com/517082456)

å‰æ®µæ—¶é—´ä¸€ä¸ªæœ‹å‹é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™éƒ½ä¼šæŠŠæŸä¸ªæ–¹æ³•æ³¨é‡Šæ‰ï¼Œä½†ä¸ºä»€ä¹ˆè¿™æ¬¡æ‰“åŒ…å‡ºæ¥çš„æ•ˆæœå´ä¸å¯¹å‘¢ï¼ŸæŒ‰ç…§ä»–çš„æ€è·¯æƒ³æ¥çš„ç¡®ç™¾æ€ä¸è§£ï¼Œä½†ç§‰ç€â€œä¸–ä¸Šæ²¡æœ‰æ— ç¼˜æ— æ•…çš„æ¨â€çš„åŸåˆ™ï¼Œæˆ‘è¿˜æ˜¯æƒ³å¸®ä»–è§£å†³ä¸€ä¸‹ç–‘é—®ï¼Œæˆ‘çœ‹äº†ä»–çš„ä»£ç ï¼Œå¹¶æ²¡æœ‰æ‰“ `Tag`ï¼Œä¹Ÿæ²¡æœ‰ç¯å¢ƒåŒºåˆ†ï¼ˆ `DEBUG` å’Œ `RELEASE` åŒºåˆ†ï¼‰ğŸ˜‚ï¼Œå°±åªèƒ½ç”¨ `otool` æ¥è¯•è¯•ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼šæ‰“å¼€ `.ipa` æ–‡ä»¶çš„ `Unix` å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/7-1.jpg?raw=true)

ç„¶ååœ¨ `Terminal` ä¸­è¾“å…¥ `otool` çš„å‘½ä»¤ï¼Œå°±å¯ä»¥æ‰“å°å‡ºä½¿ç”¨äº†å“ªäº›æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/7-2.jpg?raw=true)

è¿™åªæ˜¯ `otool` çš„ä¸€ä¸ªå°ç”¨æ³•ï¼Œè¿™ä¸ªå·¥å…·å¾ˆå¼ºå¤§ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä»¬å¯ä»¥æ·±å…¥äº†è§£ä¸€ä¸‹ã€‚

ä¸è¿‡ä»è¿™ä¸ªäº‹æƒ…ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œäººçš„è®°å¿†æ˜¯ä¸å¯é çš„ï¼Œè§„èŒƒé¡¹ç›®æ‰æ˜¯ç‹é“ï¼



iOS9 ä»¥å openURL å’Œ canOpenURL ä½¿ç”¨é™åˆ¶çš„å°è¯¯åŒº
----
**ä½œè€…**: [KANGZUBIN](https://weibo.com/kangzubin)

é€šå¸¸æˆ‘ä»¬ä¼šç”¨ `UIApplication` çš„ `openURL:` æ–¹æ³•è°ƒèµ·å…¶ä»– App æ¥è¿›è¡Œä¸€äº›æ“ä½œï¼Œå¦‚åˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»å½•ã€æ”¯ä»˜ç­‰ã€‚ä½† `iOS9` å‘å¸ƒåï¼Œåœ¨çœ‹äº†å¾ˆå¤šé€‚é…æ€»ç»“çš„æ–‡ç« åï¼Œç›¸ä¿¡å¾ˆå¤šäººå¯èƒ½è·Ÿæˆ‘ä¸€æ ·ä¼šæœ‰å¦‚ä¸‹ç†è§£ï¼š

> `iOS9` é™åˆ¶äº† `openURL:` å’Œ `canOpenURL:` æ–¹æ³•çš„ä½¿ç”¨ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒèµ·ç¬¬ä¸‰æ–¹ Appï¼Œéœ€è¦åœ¨ `Info.plist` çš„ `LSApplicationQueriesSchemes` Key ä¸­æ·»åŠ ç›¸åº” App çš„ `Scheme` æ‰è¡Œï¼Œä¸”æ·»åŠ çš„ `Scheme` ä¸ªæ•°ä¸èƒ½è¶…è¿‡ **50** ä¸ªã€‚

**å…¶å®ä¸Šé¢æè¿°æ˜¯æœ‰è¯¯çš„ã€‚**

ä¸¾ä¸ªä¾‹å­ï¼Œå¤§éƒ¨åˆ† App åœ¨æ¥å…¥å¾®ä¿¡çš„ `SDK` åï¼Œä¼šå…ˆåœ¨è‡ªå·±å·¥ç¨‹é…ç½®ä¸­çš„ `Info` -> `URL Types` æ·»åŠ æ³¨å†Œä¸€ä¸ª `Scheme`ï¼Œå« â€œwx+appIdâ€ ï¼Œä»¥ä¾¿åœ¨è°ƒèµ·å¾®ä¿¡è¿›è¡Œç™»å½•æˆ–åˆ†äº«åï¼Œå¾®ä¿¡å›è°ƒè¿”å›åˆ°æˆ‘ä»¬è‡ªå·±çš„ App ä¸­ã€‚ä½†æ˜¯è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ `openURL:` ä½¿ç”¨å¿…é¡»äº‹å…ˆå£°æ˜ä¸”æœ‰ä¸ªæ•°çš„é™åˆ¶ï¼Œé‚£ä¹ˆå¾®ä¿¡å¦‚ä½•å›è°ƒæˆåƒä¸Šä¸‡çš„ App å‘¢ï¼Œéš¾é“å¾®ä¿¡è¦åœ¨å…¶å·¥ç¨‹çš„ `Info.plist` ä¸­æŠŠè¿™äº›ç¬¬ä¸‰æ–¹ App çš„ `Scheme` éƒ½æ·»åŠ è¿›å»ï¼Œè€Œä¸”æ¯å¤©éƒ½ä¼šæœ‰æ–°å¢çš„ App æ¥å…¥äº†å¾®ä¿¡ `SDK`ï¼Œå¦‚ä½•åŠ¨æ€æ›´æ–°æ·»åŠ  `Scheme` å‘¢ï¼Ÿå¾®ä¿¡æ˜¯æœ‰ä»€ä¹ˆé»‘ç§‘æŠ€æˆ–è€…è‹¹æœç»™å¾®ä¿¡ç­‰å¤§å‚çš„è¶…çº§ App å¼€äº†ç‰¹æ®Šé€šé“ï¼Ÿ

åœ¨æŸ¥é˜…äº†è‹¹æœå®˜æ–¹æ–‡æ¡£åï¼Œæˆ‘ä»¬å‘ç°å…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/6-1.png?raw=true)

>**ï¼ï¼ï¼åªæœ‰ `canOpenURL:` æ–¹æ³•çš„ä½¿ç”¨å— `Info.plist` ä¸­å£°æ˜çš„ `Scheme` çš„é™åˆ¶ï¼Œè€Œ `openURL:` æ–¹æ³•æ˜¯ä¸å—é™åˆ¶çš„ï¼Œä¸éœ€è¦äº‹å…ˆå£°æ˜ï¼Œä¹Ÿæ²¡æœ‰ä¸ªæ•°é™åˆ¶ã€‚**ï¼ˆå…¶å®åœ¨ `iOS9` çš„æŸ Beta ç‰ˆä¸Šï¼Œ`openURL:` ä¹Ÿå—åŒæ ·é™åˆ¶ï¼Œä½†è‹¹æœåé¢ç¡®è®¤æ˜¯ Bugï¼Œåœ¨æ­£å¼ç‰ˆä¸­å·²æ›´æ­£è¿‡æ¥ï¼‰

å¦å¤–å…³äº `canOpenURL:` æœ€å¤šåªèƒ½å¯¹ **50** ä¸ª `Scheme` åšåˆ¤æ–­çš„è¯´æ³•ä¹Ÿæ˜¯é”™è¯¯çš„ã€‚è‹¹æœçš„æ­£ç¡®æè¿°æ˜¯ï¼š**â€œå¦‚æœä½ çš„ App æ˜¯ä½¿ç”¨ `Xcode 7 (iOS9 SDK)` ä¹‹å‰ç‰ˆæœ¬ç¼–è¯‘çš„ï¼Œä½†æ˜¯åœ¨ `iOS9` åŠä»¥åçš„ç³»ç»Ÿä¸­è¿è¡Œï¼Œé‚£ä¹ˆä½ çš„ App æœ€å¤šåªèƒ½è°ƒç”¨ 50 æ¬¡ `canOpenURL:` æ–¹æ³•ï¼Œè¶…è¿‡ 50 æ¬¡åï¼Œè¯¥æ–¹æ³•éƒ½ä¼šè¿”å› `NO`ã€‚â€**

å¦‚æœæˆ‘ä»¬ä½¿ç”¨æœ€æ–°ç‰ˆçš„ `Xcode` ç¼–è¯‘ Appï¼Œ`canOpenURL:` èƒ½åˆ¤æ–­çš„ `Scheme` ä¸ªæ•°åº”è¯¥æ˜¯ä¸å—é™åˆ¶çš„ã€‚

æˆ‘å†™äº†ä¸€ä¸ª `Demo` éªŒè¯äº†ä»¥ä¸Šè¯´æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ `Info.plist` ä¸­æˆ‘å…ˆæ·»åŠ äº†è¶…è¿‡ 100 ä¸ª `Scheme` åå†æ·»åŠ  "weixin"ï¼Œä»å¯ä»¥é€šè¿‡ `canOpenURL:` åˆ¤æ–­æ˜¯å¦å®‰è£…äº†å¾®ä¿¡ï¼Œå¦å¤–å³ä½¿æ²¡æœ‰æ·»åŠ å¾®åšçš„ `Scheme` "sinaweibo" ä¹Ÿå¯ä»¥é€šè¿‡ `openURL:` æ­£å¸¸æ‰“å¼€ã€‚

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/6-2.png?raw=true)

Demo åœ°å€ï¼š[TestOpenURL](https://github.com/kangzubin/DevDemo/tree/master/TestOpenURL)

>è™½ç„¶ `openURL:` æ–¹æ³•ä½¿ç”¨ä¸å—é™åˆ¶ï¼Œä½†æ˜¯è‹¹æœè¿˜æ˜¯å»ºè®®æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒä¹‹å‰ï¼Œå…ˆè°ƒ `canOpenURL:` åˆ¤æ–­ä¸€ä¸‹ï¼Œå†è¿›è¡Œåç»­æ“ä½œã€‚

ä»¥ä¸Šæµ‹è¯•ç»“æœæ˜¯åœ¨çœŸæœº **`iPhone 8 (iOS 11.2.6)`** ä¸Šè¿›è¡Œçš„ï¼Œå¦‚æœå…¶ä»–è®¾å¤‡æˆ–è€…ç³»ç»Ÿç‰ˆæœ¬æœ‰å·®å¼‚ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚

å‚è€ƒé“¾æ¥ï¼š

* [Apple Developer Documentation](https://developer.apple.com/documentation/uikit/uiapplication/1622952-canopenurl?language=objc)
* [Querying URL Schemes with canOpenURL](https://useyourloaf.com/blog/querying-url-schemes-with-canopenurl/)




â€œå·çª¥â€ç¬¬ä¸‰æ–¹APPå¤´æ–‡ä»¶
----
**ä½œè€…**: [Lefe_x](https://weibo.com/u/5953150140)

æœ‰æ—¶å€™åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦äº›é»‘ç§‘æŠ€ï¼Œâ€œå·çª¥â€ç¬¬ä¸‰æ–¹ APP ä½¿ç”¨äº†å“ªäº›ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ–çŒœçŒœå®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå’‹ä¹ˆåŠï¼Ÿ

å…¶å®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `class-dump` è¿™ä¸ªå·¥å…·æŸ¥çœ‹æŸä¸ª APP çš„å¤´æ–‡ä»¶ã€‚åªéœ€è¦æ‰¾åˆ°ç¬¬ä¸‰æ–¹ APP çš„ `xxx.app` æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ `class-dump` å‘½ä»¤å³å¯ã€‚ä¸è¿‡åœ¨æ‰§è¡Œ `class-dump` å‘½ä»¤å‰ï¼Œéœ€è¦ç¡®ä¿ `xxx.app` æ˜¯ç ¸è¿‡å£³çš„ï¼Œä» `APPStore` ä¸‹è½½çš„ `xxx.app` æ–‡ä»¶æ˜¯ç»è¿‡åŠ å¯†å¤„ç†çš„ï¼Œå¯ä»¥ç›´æ¥ä»å„å¤§è¶Šç‹±å¸‚åœºä¸Šä¸‹è½½ç¬¬ä¸‰æ–¹ `xxx.app` æ–‡ä»¶ï¼Œä»è¶Šç‹±å¸‚åœºä¸‹è½½çš„ `xxx.app` å·²è¢«ç ´è§£ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ `class-dump` å¯¼å‡ºå¤´æ–‡ä»¶ã€‚

### å®‰è£…

ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹ï¼Œä¸å•°å—¦äº†å“ˆã€‚

### å®æˆ˜

åˆ›å»ºä¸€ä¸ª `Demo`ï¼Œç„¶åæ‰“åŒ…å¯¼å‡º `ipa` åŒ…ï¼Œæ‰¾åˆ° `xxx.app`ï¼Œè¿™é‡Œ `xxx.app` æ˜¯æœªç»è¿‡åŠ å¯†çš„ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```objc
@protocol ViewControllerDelegate<NSObject>

- (void)didRefreshDataSuccess;

@end

@interface ViewController : UIViewController

@property (nonatomic, weak) id<ViewControllerDelegate> delegate;
@property (nonatomic, copy) NSString *pubName;

- (void)pubLoadDataWithAlbumID:(NSString *)albumID count:(NSString *)count;

@end

@interface ViewController1 (Navigation)

- (void)setRightBarItemWithTitle:(NSString *)title;

@end
```

æ‰§è¡Œ `class-dump` å‘½ä»¤ï¼š

```ruby
class-dump -H [xxx.appæ‰€åœ¨çš„ä½ç½®] -o [å¤´æ–‡ä»¶å¯¼å‡ºçš„ä½ç½®]
```

æ¯”å¦‚ï¼š

```ruby
class-dump -H Lefex.app -o lefexheader
```

æœ€ç»ˆå¯¼å‡ºçš„å¤´æ–‡ä»¶å¦‚ä¸‹ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/9-1.jpg?raw=true)

### æ€»ç»“

ä½¿ç”¨ `class-dump` å¯¼å‡ºå¤´æ–‡ä»¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. ä¸ç®¡ `.h` è¿˜æ˜¯ `.m` æ–‡ä»¶ä¸­çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«å¯¼å‡ºï¼›
2. æŸä¸ªç±»çš„ç±»åˆ«ä¸­çš„æ–¹æ³•ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œå¯¼å‡ºåˆ°æºæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ `ViewController (Navigation)` ä¸­çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° `ViewController` ä¸­ï¼›
3. å®ç°çš„åè®®ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œæ¯”å¦‚ `ViewControllerDelegate` çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° `ViewController` ä¸­ï¼Œå¦‚æœ `ViewController` ä¸å®ç° `ViewControllerDelegate` åè®®è®²ä¸ä¼šè¢«å¯¼å‡ºï¼›
4. åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ä¸ä¼šè¢«å¯¼å‡ºï¼Œåªä¼šå¯¼å‡ºåˆ°å®ç°åè®®çš„ç±»ä¸­ï¼›

### å‚è€ƒ

[Class-dump](http://stevenygard.com/projects/class-dump/)

å¯ä»¥å‚è€ƒè¿™ä¸ª [@everettjf](https://weibo.com/everettjf?from=usercardnew&refer_flag=0000020001_)  http://everettjf.com/2016/07/09/classify-class-dump-headers-tool/ ï¼Œè¯è¯´å¯ä»¥å¯¼å‡ºå¤´æ–‡ä»¶å¹¶æ‰¾å‡ºä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚ä¸è¿‡æˆ‘è¯•äº†ä¸‹æ²¡å®‰è£…æˆåŠŸå°±æ²¡æ·±ç©¶ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹ã€‚

æ‰“åŒ…æ—¶ Xcode æ— æ³•åŠæ—¶æ›´æ–° Provisioning Profile çš„è§£å†³åŠæ³•
-----
**ä½œè€…**: [halohily](https://weibo.com/halohily)

æˆ‘ä»¬åœ¨è‹¹æœå¼€å‘è€…ä¸­å¿ƒæ–°æ·»åŠ ä¸€å°æµ‹è¯•è®¾å¤‡çš„ `UDID` ä¹‹åï¼Œç´§æ¥ç€æ‰“å‡ºä¸€ä»½ `Adhoc` åŒ…ï¼Œå´å‘ç°æ–°æ·»åŠ çš„è®¾å¤‡è¿˜æ˜¯æ— æ³•å®‰è£…ã€‚è¿™æ˜¯å› ä¸º `Xcode` æ²¡æœ‰åŠæ—¶æ›´æ–°äº‘ç«¯çš„ `Provisioning Profile`ã€‚è¿™æ—¶å¯ä»¥æ¸…é™¤æœ¬åœ°ç›®å½• `~/Library/MobileDevice/Provisioning` ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œç„¶åæ‰“åŒ…æ—¶å‹¾é€‰ `Automatically manage signing` é€‰é¡¹ï¼Œ`Xcode` ä¼šè‡ªåŠ¨ä¸‹è½½äº‘ç«¯çš„æœ€æ–° `Provisioning Profile`ã€‚



__builtin_expectç®€ä»‹
----
**ä½œè€…**: [é«˜è€å¸ˆå¾ˆå¿™](https://weibo.com/517082456)

`__builtin_expect` æ˜¯ `GCC` å¼•å…¥çš„ï¼Œå¯¹ifè¯­å¥çš„é¢„è¨€ï¼Œç”¨è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨æœ€æœ‰å¯èƒ½æ‰§è¡Œçš„ä»£ç ï¼Œä»è€Œç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ï¼Œé€šä¿—æ¥è®²å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æ‰§è¡Œ `if` å’Œ `else` å“ªä¸ªæ˜¯å¤§æ¦‚ç‡äº‹ä»¶ã€‚è¯ä¸å¤šè¯´ç›´æ¥è¯´ç”¨æ³•ï¼š`__builtin_expect(EXP, N)`ï¼Œå¾ˆç®€å•ï¼Œ`EXP == N` æ˜¯å¤§æ¦‚ç‡äº‹ä»¶ã€‚

æˆ‘å…ˆç”¨æ­£å¸¸çš„å†™æ³•å†™äº†ä¸€ä¸ªç®€å•çš„çš„Demo

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/11-1.png?raw=true)

ä»£ç æ‰§è¡Œæ—¶é—´æ˜¯0.017361ç§’ï¼›åŠ ä¸Šè¿™ä¸ªæŒ‡ä»¤

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/11-2.png?raw=true)

ä»£ç æ‰§è¡Œæ—¶é—´æ˜¯0.007645ç§’ï¼Œè¿˜æ˜¯æŒºæ˜æ˜¾çš„ã€‚å°ä¼™ä¼´ä»¬ä¹Ÿæ¥è¯•è¯•å“‡ï¼

iOS 9 ä»¥åé€šçŸ¥ä¸å†éœ€è¦æ‰‹åŠ¨ç§»é™¤
------
**ä½œè€…**: [halohily](https://weibo.com/halohily)

é€šçŸ¥ NSNotification åœ¨æ³¨å†Œè€…è¢«å›æ”¶æ—¶éœ€è¦æ‰‹åŠ¨ç§»é™¤ï¼Œæ˜¯ä¸€ç›´ä»¥æ¥çš„ä½¿ç”¨å‡†åˆ™ã€‚åŸå› æ˜¯åœ¨ MRC æ—¶ä»£ï¼Œé€šçŸ¥ä¸­å¿ƒæŒæœ‰çš„æ˜¯æ³¨å†Œè€…çš„ unsafe_unretained æŒ‡é’ˆï¼Œåœ¨æ³¨å†Œè€…è¢«å›æ”¶æ—¶è‹¥ä¸å¯¹é€šçŸ¥è¿›è¡Œæ‰‹åŠ¨ç§»é™¤ï¼Œåˆ™æŒ‡é’ˆæŒ‡å‘è¢«å›æ”¶çš„å†…å­˜åŒºåŸŸï¼Œæˆä¸ºé‡æŒ‡é’ˆã€‚è¿™æ—¶å†å‘é€é€šçŸ¥ï¼Œä¾¿ä¼šé€ æˆ crash ã€‚è€Œåœ¨ iOS 9 ä»¥åï¼Œé€šçŸ¥ä¸­å¿ƒæŒæœ‰çš„æ˜¯æ³¨å†Œè€…çš„ weak æŒ‡é’ˆï¼Œè¿™æ—¶å³ä½¿ä¸å¯¹é€šçŸ¥è¿›è¡Œæ‰‹åŠ¨ç§»é™¤ï¼ŒæŒ‡é’ˆä¹Ÿä¼šåœ¨æ³¨å†Œè€…è¢«å›æ”¶åè‡ªåŠ¨ç½®ç©ºã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‘ç©ºæŒ‡é’ˆå‘é€æ¶ˆæ¯æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ã€‚

ä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ã€‚å¦‚æœç”¨

`- (id <NSObject>)addObserverForName:(nullable NSNotificationName)name object:(nullable id)obj queue:(nullable NSOperationQueue \*)queue usingBlock:(void (^)(NSNotification *note))block API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0));`

è¿™ä¸ªAPIæ¥æ³¨å†Œé€šçŸ¥ï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥ block ç±»å‹å‚æ•°ã€‚ä½¿ç”¨è¿™ä¸ªAPIä¼šå¯¼è‡´æ³¨å†Œè€…è¢«ç³»ç»Ÿ retain ï¼Œå› æ­¤ä»ç„¶éœ€è¦åƒä»¥å‰ä¸€æ ·æ‰‹åŠ¨ç§»é™¤é€šçŸ¥ï¼ŒåŒæ—¶è¿™ä¸ª block ç±»å‹å‚æ•°ä¹Ÿéœ€æ³¨æ„é¿å…å¾ªç¯å¼•ç”¨ã€‚

ä½¿ç”¨ LLDB expression å‘½ä»¤è°ƒè¯•åŠ¨æ€æ›´æ–° UI
------
**ä½œè€…**: [KANGZUBIN](https://weibo.com/kangzubin)

åœ¨æ—¥å¸¸ App å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿›è¡ŒçœŸæœºæˆ–è€…æ¨¡æ‹Ÿå™¨è°ƒè¯•æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¾®è°ƒä¸€ä¸‹ç•Œé¢ä¸Šçš„ UI å…ƒç´ ï¼Œæ¯”å¦‚è‰²å€¼ã€ä½ç½®ç­‰æ¥çœ‹çœ‹æ•ˆæœï¼Œä½†å¦‚æœæ¯æ¬¡éƒ½é€šè¿‡ä¿®æ”¹ä»£ç ï¼Œç„¶åé‡æ–°ç¼–è¯‘è¿è¡Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡ LLDB è°ƒè¯•å‘½ä»¤æ¥åŠ¨æ€åœ°ä¿®æ”¹ã€‚

LLDB çš„ `expression` å‘½ä»¤ç”¨äºæ‰§è¡Œä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶å°†è¡¨è¾¾å¼è¿”å›çš„ç»“æœè¾“å‡ºã€‚

æˆ‘ä»¬åœ¨ App è¿è¡Œåï¼Œç‚¹å‡» Xcode è°ƒè¯•å·¥å…·æ çš„â€œæš‚åœâ€æŒ‰é’®ï¼Œè¿›å…¥å‘½ä»¤è¡Œè°ƒè¯•æ¨¡å¼ï¼Œå¦‚å›¾ï¼š

![](https://github.com/iOS-Tips/iOS-tech-set/blob/master/images/2018/03/10-1.png?raw=true)

ç„¶åè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

```
po [[[UIApplication sharedApplication] keyWindow] recursiveDescription]
```

æ­¤æ—¶å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¸­è¾“å‡ºæ•´ä¸ª UI å±‚çº§ï¼ŒåŠæ¯ä¸ª UI å…ƒç´ å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
po [[[UIApplication sharedApplication] keyWindow] recursiveDescription]
<UIWindow: 0x7fd94a616c50; frame = (0 0; 375 667); autoresize = W+H; gestureRecognizers = <NSArray: 0x60c00025b120>; layer = <UIWindowLayer: 0x60c00003f7c0>>
   | <UIView: 0x7fd94a701f90; frame = (0 0; 375 667); autoresize = W+H; layer = <CALayer: 0x60400003b820>>
   |    | <UIView: 0x7fd94a709640; frame = (30 30; 315 120); autoresize = RM+BM; layer = <CALayer: 0x60400003b860>>
   |    | <UIView: 0x7fd94a709a30; frame = (30 180; 315 120); autoresize = RM+BM; layer = <CALayer: 0x60400003bac0>>
```

é€šè¿‡ä¸Šè¿°è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å†…å­˜åœ°å€å–å‡ºæŸä¸€ UI å…ƒç´ ï¼š

```
expression -- id $testView = (id)0x7fd94a709640
```

ç„¶åï¼Œä¿®æ”¹è¿™ä¸ª UI å…ƒç´ çš„ç›¸å…³å±æ€§ï¼š

```
expression -- (void)[$testView setBackgroundColor:[UIColor redColor]]
```

æœ€åï¼Œé€šè¿‡ä¸‹é¢å‘½ä»¤åˆ·æ–°å±å¹•ï¼Œä½ å°±å¯ä»¥çœ‹åˆ° App ä¸­çš„å¯¹åº”å…ƒç´ å‘ç”Ÿå˜åŒ–äº†ï¼š

```
expression -- (void)[CATransaction flush]
```

ä¸Šé¢åªæ˜¯ä¸ªä¾‹å­ï¼Œå…¶å®è¿™ä¸ªå‘½ä»¤ä¸é™äºè¯´åˆ·æ–° UIï¼Œä½ ç”šè‡³å¯ä»¥é€šè¿‡å®ƒ Push æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œå®ƒç›¸å½“äºå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»£ç ã€‚

å¦å¤–ï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„ `p` å’Œ `po` ä¸¤ä¸ªå‘½ä»¤ï¼Œå…¶å®ä¹Ÿæ˜¯ `expression` å‘½ä»¤çš„åˆ«åï¼Œ

`p` å‘½ä»¤ç­‰ä»·äº `expression Â --` ï¼›
`po` å‘½ä»¤ç­‰ä»·äº `expression -O --` ï¼›

å…³äº expression å‘½ä»¤çš„æ›´å¤šä½¿ç”¨æ–¹å¼ï¼Œå¯é€šè¿‡ `help expression` è·å–æŸ¥çœ‹ã€‚

å‚è€ƒé“¾æ¥ï¼š[iOS/OSX è°ƒè¯•ï¼šè·³èˆå§ï¼ä¸LLDBå…±èˆåå°”å…¹](https://segmentfault.com/a/1190000002413758)

å†™å®Œè¿™ä¸ªå°é›†åï¼Œæ— æ„çœ‹åˆ° Mac çš„ Dock æ ä¸Šçš„ Reveal åº”ç”¨å›¾æ ‡ï¼Œå¿ƒæƒ³è´¹è¿™äº›å‘¨æŠ˜å¹²å˜›ï¼Œæˆ‘ä¸ºå•¥ä¸ç”¨ Reveal è¿™ä¸ªå¼ºå¤§çš„ UI è°ƒè¯•å·¥å…·æ¥å®Œæˆè¿™ä»¶äº‹è¯·å‘¢ï¼Ÿsad...




# Cycriptè°ƒè¯•ç¬¬ä¸‰æ–¹APP
--------
**ä½œè€…**: [Lefe_x](https://weibo.com/u/5953150140)

è¯•æƒ³ä¸€ç§åœºæ™¯ï¼Œæˆ‘æƒ³çŸ¥é“æŸä¸ªç¬¬ä¸‰æ–¹ APP å½“å‰é¡µé¢å¯¹åº”çš„æ˜¯å“ªä¸ª VCï¼Œæƒ³è®©æŸä¸ªå®ä¾‹æ‰§è¡ŒæŸä¸ªå‡½æ•°åçš„æ•ˆæœï¼Œæ‰“å°å½“å‰çš„è§†å›¾å±‚çº§ï¼Œå’‹ä¹ˆåŠï¼Ÿ

å…¶å®ä½¿ç”¨ Cycript å³å¯è§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼ŒCycriptæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œå¯ä»¥æŠŠæŸæ®µä»£ç æ³¨å…¥åˆ°æŸä¸ªè¿›ç¨‹ä¸­ã€‚æ¯”å¦‚æˆ‘å¯ä»¥æŠŠç”¨ Cycript ç¼–å†™çš„ä»£ç æ¤å…¥åˆ°ä¸€ä¸ªè¿è¡Œçš„ APP ä¸­ï¼Œè¿™æ · APP å°±å¯ä»¥æ‰§è¡Œæ³¨å…¥çš„ä»£ç ã€‚ä¸‹é¢çš„æµ‹è¯•éœ€è¦å®‰è£… MonkeyDevã€‚ 

å®‰è£… Cycript éå¸¸ç®€å•ï¼Œç›´æ¥ä¸‹è½½ Cycriptï¼Œå¹¶è¿›å…¥ Cycript ç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š

```./cycript -r 192.168.10.111:6666```

192.168.10.111:6666 æ˜¯æ‰‹æœºipåœ°å€ï¼Œ6666æ˜¯é»˜è®¤çš„ç«¯å£ã€‚è¿™æ—¶æ§åˆ¶å°ä¼šæœ‰ï¼šcy#ã€‚


- 1.å½“å‰é¡µé¢å¯¹åº”çš„æ˜¯å“ªä¸ª VC?

è·å–å½“å‰é¡µé¢æ˜¯å“ªä¸ªé¡µé¢æ—¶ï¼Œå¯ä»¥ç”¨åˆ°å“åº”é“¾çš„çŸ¥è¯†ã€‚å‡å¦‚SubjectViewControlleræœ‰ä¸€ä¸ª UITableViewï¼Œ å®ƒçš„å†…å­˜åœ°å€æ˜¯ 0x106a05c00 ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤æ‰¾åˆ°å½“å‰çš„VCã€‚

```
cy# [#0x106a05c00 nextResponder]
#"<UIView: 0x105d839d0; frame = (0 0; 375 667); autoresize = W+H; layer = <CALayer: 0x1c0635460>>"
cy# [#0x105d839d0 nextResponder]
#"<SubjectViewController: 0x106a0a200>"
```

- 2.æŸä¸ªå®ä¾‹æ‰§è¡ŒæŸä¸ªå‡½æ•°åçš„æ•ˆæœï¼Ÿ

SubjectViewController çš„å†…å­˜åœ°å€æ˜¯ 0x106a0a200ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢çš„è¿™æ¡æŒ‡ä»¤ï¼ŒSubjectViewController çš„æ ‡é¢˜ä¼šç¦»å¼€å˜ä¸º Lefe_xã€‚

`cy# [#0x106a0a200 setTitle: @"Lefe_x"]`

- 3.æ‰“å°å½“å‰çš„è§†å›¾å±‚çº§

ç›´æ¥æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤å³å¯ã€‚

`[[UIApp keyWindow]recursiveDescription].toString()`


[å‚è€ƒ](http://www.cycript.org/)


# podspec ä¸­é¢„ç¼–è¯‘å®çš„ä½¿ç”¨
--------
**ä½œè€…**: [Vong_HUST](https://weibo.com/VongLo)

ç›¸ä¿¡å¤§å®¶åœ¨å†™ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶çš„æ—¶å€™å¯èƒ½éƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå†™äº†ä¸€ä¸ªå¤§è€Œå…¨çš„åº“å‘å¸ƒåˆ° Cocoapods ä¸Šï¼Œä½†æ˜¯æ¥å…¥è€…å¯èƒ½åªæƒ³ä½¿ç”¨å…¶ä¸­å‡ ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å´ä¸å¾—ä¸å¼•å…¥æ‰€æœ‰ä»£ç ï¼Œæœ‰ç‚¹ä¼¤ã€‚é‚£æœ‰æ²¡æœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå°±æ˜¯ä½¿ç”¨ Cocoapods ä¸­æä¾›çš„ GCC_PREPROCESSOR_DEFINITIONSã€‚è¿™ä¸ªæ˜¯ä» SDWebImage ä¸­å­¦åˆ°çš„ã€‚

SD æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯ä½¿ç”¨ libwebp æ¥è§£ç å±•ç¤º WebP å›¾ç‰‡ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼•å…¥æ–¹æ˜¯ä¸éœ€è¦è¿™ä¸ªåŠŸèƒ½çš„ã€‚æ‰€ä»¥ä½œè€…å·§å¦™çš„ä½¿ç”¨äº†å¦‚ä¸‹æ–¹å¼ï¼Œæ¥å®ç° WebP çš„å¼•å…¥ã€‚å³

```ruby
# çœç•¥äº†å¾ˆå¤šä¸æ˜¯é‡ç‚¹çš„ä»£ç ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ SDWebImage
s.subspec 'WebP' do |webp|
    webp.xcconfig = { 
      'GCC_PREPROCESSOR_DEFINITIONS' => '$(inherited) SD_WEBP=1',
    }
  end
```




æŸ¥çœ‹.aé™æ€åº“ä¸­çš„.oæ–‡ä»¶åŠå‡½æ•°æ¥å£ä¿¡æ¯
--------
**ä½œè€…**: [å—å³°å­_è€é©´](https://weibo.com/touristdiary)

å¦‚æœæƒ³æŸ¥çœ‹.aé™æ€åº“ä¸­çš„.oæ–‡ä»¶åŠå‡½æ•°æ¥å£ä¿¡æ¯ï¼Œå¯ä»¥å°è¯•ä¸‹ nm å‘½ä»¤ã€‚åœ¨ man page ä¸­æŸ¥çœ‹è¿™ä¸ªå‘½ä»¤çš„ä¿¡æ¯ï¼Œæˆªå–ä¸€æ®µæ¥çœ‹ï¼Œå¦‚å›¾1æ‰€ç¤ºï¼š

> Nm displays the name list (symbol table) of each object file in the argument list. If an argument is an archive, a listing for each object file in the archive will be produced. File can be of the form libx.a(x.o), in which case only symbols from that member of the object file are listed. (The parentheses have to be quoted to get by the shell.)  If no file is given, the symbols in a.out are listed.

æˆ‘ä»¬æ¥çœ‹çœ‹å®é™…æ•ˆæœï¼Œä»¥å¾®ä¿¡çš„ libWeChatSDK.a ä¸ºä¾‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

nm -m /Users/**/Desktop/libWeChatSDK.a

å®é™…çš„éƒ¨åˆ†è¾“å‡ºå¦‚å›¾2æ‰€ç¤º

```objc
				  ......
 				  (undefined) external _sqlite3_free
                 (undefined) external _sqlite3_open
                 (undefined) external _sqlite3_prepare_v2
                 (undefined) external _sqlite3_reset
                 (undefined) external _sqlite3_step

/Users/**/Desktop/libWeChatSDK.a(OpenUDID.o):
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID _generateFreshOpenUDID]
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID _getDictFromPasteboard:]
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID _setDict:forPasteboard:]
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID setOptOut:]
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID valueWithError:]
---------------- (LTO,CODE) non-external +[WXOMTAOpenUDID value]
                 (undefined) external _CC_MD5
                 (undefined) external _CFRelease
                 (undefined) external _CFStringGetCStringPtr
                 (undefined) external _CFStringGetFastestEncoding
                 (undefined) external _CFUUIDCreate
                 (undefined) external _CFUUIDCreateString
                 (undefined) external _OBJC_CLASS_$_NSDate
                 (undefined) external _OBJC_CLASS_$_NSDictionary
                 ......
```

å¤§å®¶å¯ä»¥è¯•è¯•æ•ˆæœã€‚

